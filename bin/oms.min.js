(function(){/*
 OverlappingMarkerSpiderfier
https://github.com/jawj/OverlappingMarkerSpiderfier-Leaflet
Copyright (c) 2011 - 2012 George MacKerron
Released under the MIT licence: http://opensource.org/licenses/mit-license
Note: The Leaflet maps API must be included *before* this code
Modified by Jared Hobbs
*/
var k=!0,r=null;
(function(){var t={}.hasOwnProperty,u=[].slice;this.L!=r&&(this.OverlappingMarkerSpiderfier=function(){function s(c,a){var b,e,g,f,l=this;this.map=c;a==r&&(a={});for(b in a)t.call(a,b)&&(e=a[b],this[b]=e);this.t();this.c={};f=["click","zoomend"];e=0;for(g=f.length;e<g;e++)b=f[e],this.map.addEventListener(b,function(){return l.unspiderfy()})}var d,p;d=s.prototype;d.VERSION="0.2.5";p=2*Math.PI;d.keepSpiderfied=!1;d.nearbyDistance=20;d.circleSpiralSwitchover=9;d.circleFootSeparation=25;d.circleStartAngle=
p/12;d.spiralFootSeparation=28;d.spiralLengthStart=11;d.spiralLengthFactor=5;d.legWeight=1.5;d.legColors={usual:"#222",highlighted:"#f00"};d.initMarkerArrays=function(){this.a=[];return this.g=[]};d.addMarker=function(c){var a,b=this;if(c._oms!=r)return this;c._oms=k;a=function(){return b.R(c)};c.addEventListener("click",a);this.g.push(a);this.a.push(c);return this};d.getMarkers=function(){return this.a.slice(0)};d.removeMarker=function(c){var a,b;c._omsData!=r&&this.unspiderfy();a=this.r(this.a,
c);if(0>a)return this;b=this.g.splice(a,1)[0];c.removeEventListener("click",b);delete c._oms;this.a.splice(a,1);return this};d.clearMarkers=function(){var c,a,b,e,g;this.unspiderfy();g=this.a;c=b=0;for(e=g.length;b<e;c=++b)a=g[c],c=this.g[c],a.removeEventListener("click",c),delete a._oms;this.t();return this};d.addListener=function(c,a){var b,e;((e=(b=this.c)[c])!=r?e:b[c]=[]).push(a);return this};d.removeListener=function(c,a){var b;b=this.r(this.c[c],a);0>b||this.c[c].splice(b,1);return this};d.clearListeners=
function(c){this.c[c]=[];return this};d.trigger=function(){var c,a,b,e,g,f;a=arguments[0];c=2<=arguments.length?u.call(arguments,1):[];a=(b=this.c[a])!=r?b:[];f=[];e=0;for(g=a.length;e<g;e++)b=a[e],f.push(b.apply(r,c));return f};d.generatePtsCircle=function(c,a){var b,e,g,f,l;g=this.circleFootSeparation*(2+c)/p;e=p/c;l=[];for(b=f=0;0<=c?f<c:f>c;b=0<=c?++f:--f)b=this.circleStartAngle+b*e,l.push(new L.k(a.x+g*Math.cos(b),a.y+g*Math.sin(b)));return l};d.generatePtsSpiral=function(c,a){var b,e,g,f,l;
g=this.spiralLengthStart;b=0;l=[];for(e=f=0;0<=c?f<c:f>c;e=0<=c?++f:--f)b+=this.spiralFootSeparation/g+5E-4*e,e=new L.k(a.x+g*Math.cos(b),a.y+g*Math.sin(b)),g+=p*this.spiralLengthFactor/b,l.push(e);return l};d.spiderListener=function(c){var a,b,e,g,f,l,d,n,m;a=c._omsData!=r;(!a||!this.keepSpiderfied)&&this.unspiderfy();if(a)return this.i("click",c);g=[];f=[];l=this.nearbyDistance*this.nearbyDistance;e=this.e(c.b());m=this.a;d=0;for(n=m.length;d<n;d++)a=m[d],b=this.e(a.b()),this.h(b,e)<l?g.push({u:a,
m:b}):f.push(a);return 1===g.length?this.i("click",c):this.S(g,f)};d.willSpiderfy=function(c){var a,b,e,g,f,d,h,n;b=this.nearbyDistance;e=b*b;b=this.e(c.b());d=this.a;g=0;for(f=d.length;g<f;g++)if(a=d[g],!(a===c||a.map==r||!a.I()))if(a=this.e((h=(n=a._omsData)!=r?n.j:void 0)!=r?h:a.b()),this.h(a,b)<e)return k;return!1};d.markersThatWillAndWontSpiderfy=function(){var c,a,b,e,g,f,d,h,n,m,p,q;f=this.nearbyDistance;c=f*f;e=this.a;f=[];m=0;for(b=e.length;m<b;m++)a=e[m],f.push({n:this.e((d=(h=a._omsData)!=
r?h.j:void 0)!=r?d:a.b()),d:!1});m=this.a;a=d=0;for(h=m.length;d<h;a=++d)if(b=m[a],b.q!=r&&(e=f[a],!e.d)){q=this.a;b=n=0;for(p=q.length;n<p;b=++n)if(g=q[b],b!==a&&g.q!=r&&(g=f[b],(!(b<a)||g.d)&&this.h(e.n,g.n)<c)){e.d=g.d=k;break}}d=[];h=[];e=this.a;c=m=0;for(b=e.length;m<b;c=++m)a=e[c],(f[c].d?d:h).push(a);return[d,h]};d.makeHighlightListeners=function(c){var a=this;return{l:function(){return c._omsData.f.w({color:a.legColors.highlighted})},p:function(){return c._omsData.f.w({color:a.legColors.usual})}}};
d.spiderfy=function(c,a){var b,e,g,f,d,h,n,m,p,q;this.A=k;q=c.length;b=this.O(function(){var a,b,e;e=[];a=0;for(b=c.length;a<b;a++)n=c[a],e.push(n.m);return e}());f=q>=this.circleSpiralSwitchover?this.H(q,b).reverse():this.G(q,b);b=function(){var a,b,n,q=this;n=[];a=0;for(b=f.length;a<b;a++)g=f[a],e=this.P(g),p=this.N(c,function(a){return q.h(a.m,g)}),h=p.u,d=new L.C([h.b(),e],{color:this.legColors.usual,T:this.legWeight,F:!1}),this.map.D(d),h._omsData={j:h.b(),f:d},this.legColors.highlighted!==this.legColors.usual&&
(m=this.M(h),h._omsData.s=m,h.addEventListener("mouseover",m.l),h.addEventListener("mouseout",m.p)),h.v(e),h.z(1E6),n.push(h);return n}.call(this);delete this.A;this.o=k;return this.i("spiderfy",b,a)};d.unspiderfy=function(c){var a,b,e,g,d,l,h;c==r&&(c=r);if(this.o==r)return this;this.B=k;g=[];e=[];h=this.a;d=0;for(l=h.length;d<l;d++)a=h[d],a._omsData!=r?(this.map.Q(a._omsData.f),a!==c&&a.v(a._omsData.j),a.z(0),b=a._omsData.s,b!=r&&(a.removeEventListener("mouseover",b.l),a.removeEventListener("mouseout",
b.p)),delete a._omsData,g.push(a)):e.push(a);delete this.B;delete this.o;this.i("unspiderfy",g,e);return this};d.ptDistanceSq=function(c,a){var b,e;b=c.x-a.x;e=c.y-a.y;return b*b+e*e};d.ptAverage=function(c){var a,b,e,d,f;d=b=e=0;for(f=c.length;d<f;d++)a=c[d],b+=a.x,e+=a.y;c=c.length;return new L.k(b/c,e/c)};d.llToPt=function(c){return this.map.J(c)};d.ptToLl=function(c){return this.map.K(c)};d.minExtract=function(c,a){var b,e,d,f,l,h;d=l=0;for(h=c.length;l<h;d=++l)if(f=c[d],f=a(f),"undefined"===
typeof b||b===r||f<e)e=f,b=d;return c.splice(b,1)[0]};d.arrIndexOf=function(c,a){var b,d,g,f;if(c.indexOf!=r)return c.indexOf(a);b=g=0;for(f=c.length;g<f;b=++g)if(d=c[b],d===a)return b;return-1};return s}())}).call(this);}).call(this);
/* Wed Apr 10 14:12:23 MDT 2013 */
